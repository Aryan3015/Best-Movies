(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[1],{1592:function(e,t,a){"use strict";a(37),a(61),a(25),a(32),a(28),a(52),a(16),a(99),a(66),a(46),a(48),a(42),a(18),a(19),a(20),a(130),a(86),a(199),a(173),a(157),a(119),a(41),a(121),a(14),a(22),a(55),a(59),a(184),a(29),a(30),a(31),a(35),a(27),a(36),a(23),a(79),a(54);var o=a(0),i=a.n(o),s=a(11),n=a(1),r=a(2249),l=a(4),c=a(131),d=a(5),p=a(614),u=a.n(p),g=a(10),m=a.n(g),h=a(3),f=a(68),y=a(163),_=a(151),v=a(150),b=a(143),S=a(45),I=a(49),O=a(62),j=a(186),D=a(541),k=a(1964),T=a(8),E=a(26),P=a(115),w=a.n(P),A=a(161),N=a(499),C=a(503),R=a(6),L=a(527),U=a(58),M=a(2),B=a(50),V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAt1BMVEX///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8D3dFxAAAAPHRSTlMBg1vZ1G8HzDMV+UzRMfu1uRyQDIdYm7MYYLILoPcZn/F/l8MoYZ1+5HHmDqswSvqNBP1CjjaSVPjomt3T80oUAAAAkUlEQVQoz63KxRLCUBBE0SYGEdw1uLtL//93saAqCZOXFfRq6p4Bfl12OUuAHFNquSXI6akfuYjli0fS4Vp27c7H9UXDFn2z49k24h0e93AVfcy5hcN2FUn5AgCYnMpfEgA6nKjBpwagrFck1NgEkGFaQolVNRTNtho++wKHveB2OQqhxegGITTq3SD3hxb+vDfyexVgvskjoAAAAABJRU5ErkJggg==",G=a(7),F=a(1536),x=a(297),H=a(56),J=a(53),W=a(522);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=oe(e);if(t){var i=oe(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return te(this,a)}}function te(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var se=null;"undefined"!=typeof document&&void 0!==document.hidden?("hidden",se="visibilitychange"):"undefined"!=typeof document&&void 0!==document.msHidden?("msHidden",se="msvisibilitychange"):"undefined"!=typeof document&&void 0!==document.webkitHidden&&("webkitHidden",se="webkitvisibilitychange");var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(l,e);var t,a,o,s=ee(l);function l(e){var t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ie(ae(a=s.call(this,e)),"OpenpopupNextVideo",(function(){a.setState({nextepisodecheck:!1})})),ie(ae(a),"ClosepopupNextVideo",(function(){localStorage.removeItem("accessToken"),localStorage.clear(),a.props.data.history.push("/signout")})),ie(ae(a),"handleVisibilityChange",(function(){localStorage.getItem("HTMedia")&&player&&player.player.pause(),localStorage.getItem("accessToken")||"htmedia"!=window.SSOSource||a.props.data.history.push("/signout"),"undefined"!=typeof window&&"htmedia"==window.SSOSource&&player&&player.player.pause()})),ie(ae(a),"loginInitiateGA",(function(){var e=Object(M.x)(),t=Object(M.W)(a.props.userDetails,a.props.userState),o=a.getGACommonParams(),i=n.SIGN_IN_GA_EVENTS.GA_LOGIN_INITIATION;o=Q(Q({},o),{},{event:i.EVENT_NAME,eventCategory:i.EVENT_CATEGORY,eventAction:i.EVENT_ACTION,pageID:"undefined"!=typeof localStorage&&localStorage.getItem("log_ini_page_id"),EntryPoint:"undefined"!=typeof window&&localStorage.getItem("gaLoginEntryPoint")?localStorage.getItem("gaLoginEntryPoint"):"menu_click",PreviousScreen:"undefined"!=typeof localStorage&&localStorage.getItem("log_ini_previous_screen"),ScreenName:"undefined"!=typeof localStorage&&localStorage.getItem("log_ini_screen_name"),CleverTapID:window.clevertap.getCleverTapID()||"NA",LoggedInMedium:t.LoggedInMedium?t.LoggedInMedium:"NA",subscriptionStatus:Object(M.hb)(a.props.userState)||"NA",subscribedPackSKU:t.SubscribedPackSKU?t.SubscribedPackSKU:"NA",UserAge:t.UserAge?t.UserAge:"NA",UserGender:t.UserGender?t.UserGender:"NA",multiProfileCategory:"NA",profileNumber:t.ProfileNumber?t.ProfileNumber:"NA",noOfProfilesPresent:t.NoOfProfilesPresent?t.NoOfProfilesPresent:"NA",multiProfileType:a.props.selectedProfile?a.props.selectedProfile.contactType===n.CONTACT_TYPE.KID?"Kid "+a.props.selectedProfile.ageGroup:n.GA_USER_TYPE_ADULT:"NA",LogInFlow:a.props&&a.props.history&&a.props.history.location&&a.props.history.location.state&&a.props.history.location.state.linkMobileNum?2==a.props.userState?"phone linking":"mandatory login":"login",SegmentID:"NA",IsUpdatedSchema:"Yes",deviceName:e}),Object(G.C)(o),localStorage.removeItem("log_ini_previous_screen"),localStorage.removeItem("log_ini_screen_name"),localStorage.removeItem("log_ini_page_id")})),ie(ae(a),"getCleverTapReminderParams",(function(e,t,a){var o,i,s,n,r,l,c,d,p,u,g,m,h;return{program_name:null==a||null===(o=a.resultObj)||void 0===o||null===(i=o.containers[0])||void 0===i||null===(s=i.metadata)||void 0===s?void 0:s.title,program_id:t,content_title:null==a||null===(n=a.resultObj)||void 0===n||null===(r=n.containers[0])||void 0===r||null===(l=r.metadata)||void 0===l?void 0:l.episodeTitle,content_id:t,event_date:"",event_start_time:null==a||null===(c=a.resultObj)||void 0===c||null===(d=c.containers[0])||void 0===d||null===(p=d.metadata)||void 0===p||null===(u=p.emfAttributes)||void 0===u?void 0:u.match_start_time,event_end_time:"",channel_name:"",classification:"",genre:"",language:null==a||null===(g=a.resultObj)||void 0===g||null===(m=g.containers[0])||void 0===m||null===(h=m.metadata)||void 0===h?void 0:h.language,page_name:"home",page_id:e.page_id,page_category:e.page_category,cp_customer_id:localStorage.getItem("CPID")||""}})),ie(ae(a),"SyndicatepopUpClose",(function(){a.setState({showSyndicatePopup:!1})})),localStorage.getItem("HTMedia")&&localStorage.getItem("accessToken")&&window.addEventListener("beforeunload",(function(){window.location.replace("/"),localStorage.removeItem("accessToken"),localStorage.removeItem("HTMedia"),localStorage.clear(),window.location.reload()})),a.state=(ie(t={TimeoutValue:!1,inactive_session_duration:!1,actions:[],showTimeOut:!1,isBack:!1,show:!0,episodedata:[],playerdata:{},isPageLoaded:!1,redirect:null,isOpen:!1,nextepisodecheck:!1,componentToBeRendered:"",showAgeGateToast:!1,ageGateToastOptions:{message:"",error:!1},settings:{subtitles:!0},customAdHeight:{top:"56.2vw"},visibilityChange:null,showToastPop:!1,toastOptionsReminder:{message:"",error:!1},shouldShowAgeGenderIntervention:!1,showAgeGenderPopUp:!0,playerMetData:{},windowVariant:1,isLogoutPopupVisible:!1},"isLogoutPopupVisible",!1),ie(t,"showPopup",!1),ie(t,"showSyndicatePopup",!1),ie(t,"popUpText",""),t),a.scrollDown=a.scrollDown.bind(ae(a)),a.scrollUp=a.scrollUp.bind(ae(a)),a.getAssetInfo=a.getAssetInfo.bind(ae(a)),a.ScrollCheck=a.ScrollCheck.bind(ae(a)),a.scrollUpHideHeader=a.scrollUpHideHeader.bind(ae(a)),a.scrollDownShowHeader=a.scrollDownShowHeader.bind(ae(a)),a.hidepopup=a.hidepopup.bind(ae(a)),a.shareIconClick=a.shareIconClick.bind(ae(a)),a.interventionSigninClick=a.interventionSigninClick.bind(ae(a)),a.videoSubtitlecallback=a.videoSubtitlecallback.bind(ae(a)),a.tempassetInfo={},a.playermetadata={},a.isAdPresent=!1,a.idleTimerRef=i.a.createRef(),a.onPopstate=a.onPopstate.bind(ae(a)),a.OpenpopupNextVideo=a.OpenpopupNextVideo.bind(ae(a)),a.ClosepopupNextVideo=a.ClosepopupNextVideo.bind(ae(a)),a.googleoptimizeVariantID=1,a.getPlaybackQualityTitleForId=a.getPlaybackQualityTitleForId.bind(ae(a)),a.hideAgeGenderIntervention=a.hideAgeGenderIntervention.bind(ae(a)),a.checkJunkValue=a.checkJunkValue.bind(ae(a)),a.isFirstVideo=a.isFirstVideo.bind(ae(a)),a.reminderEvent=new CustomEvent("reminder_set_portrait_event"),a.mylistEvent=new CustomEvent("mylist_portrait_event"),a}return t=l,(a=[{key:"onPopstate",value:function(){localStorage.getItem("HTMedia")&&localStorage.getItem("accessToken")&&(this.setState({isBack:!0}),this.props.data.history.push("/"),window.location.reload())}},{key:"navigateToPage",value:function(e,t,a){var o=this.props.data.userstate,i=Object(I.h)(e,o,e.metadata&&null!==e.metadata.emfAttributes&&e.metadata.emfAttributes&&e.metadata.emfAttributes?e.metadata.emfAttributes.value:null,this.props.userDetails,a,!0),s=this.props.data.store.dictionary,n=Object(T.O)(i,s,null);window.destroyingPlayer();try{JSON.parse(sessionStorage.getItem("demoModeData"))&&JSON.parse(sessionStorage.getItem("demoModeData")).demo_mode&&window.xhook.enable()}catch(e){}n?this.props.crossPlatformUpgradeErrorPopup({message:n,redirect:"/"}):null!=localStorage&&localStorage.getItem("playNextTag")?this.props.data.history.replace(i):this.props.data.history.push(i)}},{key:"scrollDown",value:function(){document.addEventListener("mousewheel",this.scrollDownShowHeader,!1)}},{key:"scrollUp",value:function(){document.addEventListener("mousewheel",this.scrollUpHideHeader,!1)}},{key:"scrollDownShowHeader",value:function(e){e.wheelDeltaY<=0&&document.getElementById("AppHeader")&&(document.getElementById("AppHeader").style.display="flex"),this.handlePlayerContainer()}},{key:"scrollUpHideHeader",value:function(e){e.wheelDeltaY>0&&document.getElementById("AppHeader")&&(document.getElementById("AppHeader").style.display="none"),this.handlePlayerContainer()}},{key:"handlePlayerContainer",value:function(){window.pageYOffset,document.getElementById("main_video")}},{key:"handleSubscriptionRediection",value:function(){var e,t,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(null===(e=this.props.featureConfig)||void 0===e||null===(t=e.plan_comparison)||void 0===t||null===(a=t.design_variant_mapping)||void 0===a?void 0:a.player_page)||"default";"IN"==(null===(o=this.props)||void 0===o||null===(i=o.channelStores)||void 0===i?void 0:i.country_code)&&"LIV_WWE"!==s&&"default"!==n?this.props.fetchOverlayPopup({packID:s,display:!0,page:"plan",planPageVariant:n}):(this.props.fetchOverlayPopup({packID:s,display:!1,page:"plan",planPageVariant:n}),""!==s&&void 0!==s?this.props.history.push("/subscription?pack_id="+s):this.props.history.push("/subscription"))}},{key:"togglePopup",value:function(e,t){var a=Object(M.Qb)(e,t,this.props);if("syndicate"==a.type)this.setState({showSyndicatePopup:!this.state.showSyndicatePopup,popUpText:a.text});else{if("airtel"!=a.type)return!0;this.setState({showPopup:!this.state.showPopup,popUpText:a.text})}}},{key:"checkFreePreviewEnabled",value:function(e,t){var a,o,i,s,n,r,l,c,d,p,u,g,m,h,f,y,_,v,b,S,I,O=null==e||null===(a=e.resultObj)||void 0===a||null===(o=a.containers[0])||void 0===o||null===(i=o.metadata)||void 0===i?void 0:i.objectSubtype,j=null===(s=this.props.config)||void 0===s||null===(n=s.resultObj)||void 0===n||null===(r=n.config)||void 0===r||null===(l=r.free_preview)||void 0===l||null===(c=l.preview_based_classification_and_video_types)||void 0===c?void 0:c.filter((function(e){return(null==e?void 0:e.objectSubType)===O})),D=null===(d=this.props.config)||void 0===d||null===(p=d.resultObj)||void 0===p||null===(u=p.config)||void 0===u||null===(g=u.free_preview)||void 0===g?void 0:g.enable_preview_new,k=(null==e||null===(m=e.resultObj)||void 0===m||null===(h=m.containers[0])||void 0===h||null===(f=h.metadata)||void 0===f||null===(y=f.emfAttributes)||void 0===y||y.is_preview_enabled,null==e||null===(_=e.resultObj)||void 0===_||null===(v=_.containers[0])||void 0===v||null===(b=v.metadata)||void 0===b||null===(S=b.emfAttributes)||void 0===S?void 0:S.value);return!(D&&j.length>0&&""===t&&(null===(I=j[0])||void 0===I||!I.enabled||"Free"!=k))}},{key:"getPlaybackQualityTitleForId",value:function(e){var t,a,o,i,s,n=[];return Object.keys(this.props.videoResolutionLadder).length>0&&(n=[].concat(K(null===(t=this.props.videoResolutionLadder)||void 0===t||null===(a=t.videoResolution)||void 0===a?void 0:a.selector),K(null===(o=this.props.videoResolutionLadder)||void 0===o||null===(i=o.videoResolution)||void 0===i?void 0:i.videoQuality))),Array.isArray(n)&&n.length>0&&(s=n.find((function(t){return t.id.toString()===e}))),s?s.name:"Auto"}},{key:"checkMaximumConcurrencyAchieved",value:function(e){var t;if((null==e?void 0:e.resultCode)==n.FAILURE_RESULT_CODE&&(null==e||null===(t=e.resultObj)||void 0===t?void 0:t.MaxAllowedConcurrencyLimit)>0){var a=this.props.country.resultObj.country_code;localStorage.setItem("isMaxConcurrencyAchieved",!0),Object(D.a)(a).then((function(){})),this.setState({isLogoutPopupVisible:!0})}}},{key:"entryPageIdgetEntryPageId",value:function(e){var t,a;return"POP"!==this.props.history.action?null!==(t=this.props)&&void 0!==t&&null!==(a=t.SetAssetDeeplink)&&void 0!==a&&a.assetDeepLink&&(e="deeplink"):e=window.performance.navigation&&1===window.performance.navigation.type||window.performance.getEntriesByType("navigation").map((function(e){return e.type})).includes("reload")?"refresh":"deeplink",this.props.setAssetDeepLink(!1),e}},{key:"componentDidMount",value:function(){var e,t,a,o,i,s,r,l,c,p,u,g,m,f,y,v,b,S,I,j,D,k,E,P,w,A,N,C,L,V,G,F,H,J,W,K,X,q=this,z=new URLSearchParams(this.props.location.search);Object(M.Ib)(z),this.props.config;var Z=this.props&&this.props.config&&this.props.config.resultObj&&this.props.config.resultObj.config&&this.props.config.resultObj.config.supported_codec&&this.props.config.resultObj.config.supported_codec;window.PLAYER_DATASYNC={videourl_api:{api_ver:"3.0",headers:{td_client_hints:Object(T.t)(Z)},query_params:{}}};var $="";if("MOVIES"==this.props.type?$=this.props.data.movieDetails:"EPISODES"==this.props.type?$=this.props.data.episodeDetails:"LIVE_CHANNEL"==this.props.type?$=this.props.data.channelDetails:"HIGHLIGHTS"!=this.props.type&&"TRAILER"!=this.props.type||($=this.props.data.sharedDetails),$&&sessionStorage.setItem("videoDetails",JSON.stringify($)),this.checkMaximumConcurrencyAchieved($),"htmedia"==localStorage.getItem("SSOSource")&&localStorage.getItem("accessToken")){var ee,te=localStorage.getItem("SSOSource");te&&this.props.config.resultObj.config.b2bpartner_config.filter((function(e){return e.partner==te})).map((function(e){ee=e.config_value.total_session_duration})),setTimeout((function(){return q.setState({showTimeOut:!0})}),1e3*ee)}window.addEventListener("popstate",this.onPopstate),window.addEventListener("beforeunload",this.onUnload),document.addEventListener(se,this.handleVisibilityChange,!1),d.isMobile&&!localStorage.getItem("isGalaxyWebView")&&localStorage.setItem("hidesharepopup","yes"),this.scrollDown(),this.scrollUp(),window.scrollTo(0,0),window.addEventListener("scroll",this.ScrollCheck,!0);var ae=this;localStorage.getItem("accessToken")&&localStorage.getItem("addToMyList")&&this.props.addVideoToMyList();var oe=this.props.data.playerDetails.resultObj?this.props.data.playerDetails.resultObj.videoURL:"",ie=(this.props.data.playerDetails.resultObj&&this.props.data.playerDetails.resultObj.isEncrypted,this.props.data.playerDetails),ne=this.props.type,re=this.getAssetInfo(ne),le=null==re||null===(e=re.resultObj)||void 0===e?void 0:e.containers[0];window.addEventListener("dispatchContentBlockingEvent",(function(){return q.togglePopup(le,null)}));var ce=this.props.data.store.loggedInUserDetails.resultObj?this.props.data.store.loggedInUserDetails.resultObj:"undefined"!=typeof localStorage&&localStorage.getItem("accessToken")?"undefined"!=typeof localStorage&&null!==localStorage.getItem("user_profile_data")&&JSON.parse(localStorage.getItem("user_profile_data")).resultObj:"",de=this.props.data.store.dictionary,pe={basepath:"https://apiv2.sonyliv.com",country:this.props.data.store.country.resultObj.country_code,middleware:n.MIDDLE_WARE,version:n.VERSION,D1:"undefined"!=typeof window&&localStorage.getItem("cluster")||n.DIRECTORY_1,D2:n.DIRECTORY_2,platform:n.PLATFORM},ue={streaming_quality:localStorage.getItem("accessToken")||localStorage.getItem("videoStreamingQuality")?localStorage.getItem("videoStreamingQuality"):"1",subtitle:localStorage.getItem("accessToken")&&sessionStorage.getItem("subtitles")?sessionStorage.getItem("subtitles"):localStorage.getItem("subtitles")||!0,auto_play:localStorage.getItem("accessToken")&&sessionStorage.getItem("autoPlay")?sessionStorage.getItem("autoPlay"):localStorage.getItem("autoPlay")||!0},ge=Q({},ue);if(ge.streaming_quality=this.getPlaybackQualityTitleForId(ge.streaming_quality),this.updateEventDetails(),"undefined"!=typeof window&&localStorage.getItem("setReminderId")){var me=localStorage.getItem("setReminderId");localStorage.removeItem("setReminderId"),this.props.fetchDetailsPageData(me,0,9).then((function(){q.addSetReminder(q.props.showDetails)})).catch((function(e){}))}var he=this.props.analyticsDetails,fe=Object(T.F)(this.props.config,window.location.href),ye=(fe&&"utm ".concat(fe.utmSource||""," ").concat(fe.utmMedium||""),"others");ye=null!=localStorage&&localStorage.getItem("PartnerDetails")?"external deeplink":this.props.location&&this.props.location.state&&this.props.location.state.custome_conviva_pointData?this.props.location.state.custome_conviva_pointData:this.props.location&&this.props.location.state&&this.props.location.state.conviva_pointData?this.props.location.state.conviva_pointData:he&&he.conviva_point?he.conviva_point:"others";var _e="";_e="undefined"!=typeof localStorage&&"direct_search"===localStorage.getItem("gaLoginEntryPoint")?"search":this.entryPageIdgetEntryPageId(this.props.data.eventDetails.ga_previous_page_id);var ve=localStorage.getItem("gaLoginEntryPoint");localStorage.getItem("isFromWatchNow")?ve="watch_now_player_click":"video_streaming"==sessionStorage.getItem("subscriptionEntryPath")?ve="subscribe_vid_streamig_click":"video_ended"==sessionStorage.getItem("subscriptionEntryPath")&&(ve="go_premium_vid_end_click");var be={entry_page_name:this.props.data.eventDetails.source_page_category,entry_page_id:_e,entry_source:"NA",band_title:he&&he.band_title?he.band_title:"",band_id:he&&he.band_id?he.band_id:"",page_id:this.props.data.eventDetails.page_id,page_category:this.props.data.eventDetails.page_category,geo_location:this.props.data.store.country.resultObj.country_code,subscription_status:localStorage.getItem("accessToken")&&Object(R.n)(this.props.data.store.loggedInUserDetails)&&Object(R.n)(this.props.data.store.loggedInUserDetails).subscription.subscriptionStatus?Object(R.n)(this.props.data.store.loggedInUserDetails).subscription.subscriptionStatus:"",advertising_id:localStorage.getItem("token"),user_id:localStorage.getItem("token"),cp_customer_id:localStorage.getItem("accessToken")&&this.props.data.store.loggedInUserDetails.resultObj?this.props.data.store.loggedInUserDetails.resultObj.cpCustomerID:"NA",partner_id:"SONYLIV",page_name:"Detail Screen",app_name:n.GA_APP_NAME,config_type:sessionStorage.getItem(n.GA_CONFIG_TYPE_TEXT),app_version:n.WEB_APP_VERSION,grid_details:Q(Q({},he),{},{target_page_id:n.CM_DETAILS_PAGE_ID}),tvc_client_id:"NA",source_play:he&&he.source_play?he.source_play:"",ga_entry_point:ve,conviva_entry_point:ye,userType:localStorage.getItem("accessToken")?n.GA_SIGNED_USER:n.GA_USER_TYPE_GUEST,sub_status:1===this.props.data.userstate||0===this.props.data.userstate?h.NON_SUBSCRIPTION_STATUS:h.SUBSCRIPTION_STATUS};if(!this.checkFreePreviewEnabled(re,ce)){this.loginInitiateGA();var Se=Object(M.B)(this.props.eventDetails.source_page_id);localStorage.setItem("gaPreviousScreen",Se),this.props.history.push("/signin")}var Ie={},Oe=localStorage.getItem("cluster"),je=d.isMobile&&("SR"==Oe||"R"==Oe||"SRK"==Oe)&&JSON.parse(localStorage.getItem("ConfigRes"));Ie="OK"===this.props.data.store.config.resultCode&&this.props.data.store.config.resultObj&&this.props.data.store.config.resultObj.config?Q(Q({ads_config:this.props.data.store.config.resultObj.config.ads_config,analytics_config:this.props.data.store.config.resultObj.config.analytics_config,app_player_config:je||this.props.data.store.config.resultObj.config.app_player_config,auto_play_settings:this.props.data.store.config.resultObj.config.auto_play_settings,free_preview:this.props.data.store.config.resultObj.config.free_preview,setting_clevertap:this.props.data.store.config.resultObj.config.setting_clevertap,segment_config:this.props.data.store.config.resultObj.config.segment_config,sportsInteractive:this.props.data.store.config.resultObj.config.sportsInteractive,companion_ads:this.props.data.store.config.resultObj.config.companion_ads,dvr:this.props.data.store.config.resultObj.config.dvr,timeline_marker:this.props.data.store.config.resultObj.config.timeline_marker,report_error:this.props.data.store.config.resultObj.config.report_error,enable_conviva_api:this.props.data.store.config.resultObj.config.enable_conviva_api,conviva_api_timeout_seconds:this.props.data.store.config.resultObj.config.conviva_api_timeout_seconds,continue_Watching:this.props.data.store.config.resultObj.config.continue_Watching,language_iso_code:this.props.data.store.config.resultObj.config.language_iso_code,conviva:this.props.data.store.config.resultObj.config.conviva,video_concurrency_polling_interval_sec:this.props.data.store.config.resultObj.config.video_concurrency_polling_interval_sec,allowed_audio_on_player:this.props.data.store.config.resultObj.config.allowed_audio_on_player,first_party_data:this.props.data.store.config.resultObj.config.first_party_data,age_range:this.props.data.store.config.resultObj.config.age_range,videos_pending_count_ui_timeout:this.props.data.store.config.resultObj.config.videos_pending_count_ui_timeout,gpdr:!!this.props.data.store.config.resultObj.config.gdpr&&this.props.data.store.config.resultObj.config.gdpr,playable_asset_types:this.props.data.store.config.resultObj.config&&this.props.data.store.config.resultObj.config.playable_asset_types||[],tl_marker:this.props.data.store.config.resultObj.config&&this.props.data.store.config.resultObj.config.tl_marker||null},this.getLivLogoObjs()),{},{audio_languages:this.props.data.store.config.resultObj.config.audio_languages,audio_selection_timeout:this.props.data.store.config.resultObj.config.app_player_config&&this.props.data.store.config.resultObj.config.app_player_config.audio_selection_timeout}):{},this.checkentitlement(re);var De=Date.now(),ke=d.isMobile?(null==re||null===(t=re.resultObj)||void 0===t||null===(a=t.containers[0])||void 0===a||null===(o=a.metadata)||void 0===o||null===(i=o.emfAttributes)||void 0===i?void 0:i.portrait_thumb)||"":(null==re||null===(s=re.resultObj)||void 0===s||null===(r=s.containers[0])||void 0===r||null===(l=r.metadata)||void 0===l||null===(c=l.emfAttributes)||void 0===c?void 0:c.landscape_thumb)||"";localStorage.setItem("contentPoster",ke);var Te,Ee,Pe=this.props.iscontinuewatch;null!=this.props.currentPlayTime.currentPlayTime&&"skinned_video_layout"==this.props.currentPlayTime.layout&&(Pe=Q(Q({},this.props.iscontinuewatch),{},{position:Math.floor(this.props.currentPlayTime.currentPlayTime)})),"undefined"!=typeof localStorage&&localStorage.getItem("reco_logic")&&(Te={isReco:!0,recAlgoCode:localStorage.getItem("reco_logic")}),"IN"===(null===(p=this.props.country)||void 0===p||null===(u=p.resultObj)||void 0===u?void 0:u.country_code)&&(Ee={LIV_ID:localStorage.getItem("LIV_ID")});var we=sessionStorage&&sessionStorage.getItem("currentTrailerContent")?JSON.parse(sessionStorage.getItem("currentTrailerContent")):"";this.playermetadata=Q(Q(Q(Q({utmData:Object(T.F)(this.props.config,window.location.href),deviceName:Object(M.x)()?Object(M.x)():"NA",countryInfo:this.props.country.resultObj?this.props.country.resultObj:"",isPrefetchEnabled:!1,assetInfo:re,dictionary:de,profileInfo:ce,currentTime:De,completeConfig:this.props.config,type:this.props.type,platformConfig:"web",subscriptionInfo:{},configInfo:Ie,playbackInfo:ie,localeInfo:h,premiumCostText:"Starting at Rs.299/Mnth",showInfo:this.props.data.showDetails||null,seasonInfo:this.props.data.seasonsContainer||null,convivaData:be,settings_preference:ue,DestroyPlayerScreen:!(!this.props.location.state||!this.props.location.state.DestroyPlayerScreen||!0!==this.props.location.state.DestroyPlayerScreen),settings_preference_new:ge,resolution_ladder:this.props.videoResolutionLadder,selectedProfile:this.props.selectedProfile,is_lat:"true"==localStorage.getItem("isPersonalizedAdValue")?0:1,personalizedAds:"true"==localStorage.getItem("isPersonalizedAdValue"),accessToken:localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):"NA",security_token:localStorage.getItem("security_token"),DeviceID:localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),UUID:localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),PPID:"IN"===(null===(g=this.props.country)||void 0===g||null===(m=g.resultObj)||void 0===m?void 0:m.country_code)?localStorage.getItem("PPID"):localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),advertiserId:"IN"===(null===(f=this.props.country)||void 0===f||null===(y=f.resultObj)||void 0===y?void 0:y.country_code)?localStorage.getItem("baseId"):localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),trailer_config:(null===(v=this.props)||void 0===v||null===(b=v.featureConfig)||void 0===b?void 0:b.trailer_config)||null,isContinueWatch:localStorage.getItem("isFromWatchNow")?0:we&&we.resumePlaybackTime?{position:we.resumePlaybackTime}:Pe},Object(M.h)()&&{adtest_param:Object(M.h)()}),{},{apidata:pe,recommendedData:this.props.recommendedData,selected_contact_id:localStorage.getItem("selected_contact_id")},"undefined"!=typeof window&&localStorage.getItem("isGalaxyWebView")&&{samsung_my_galaxy_app:!0,analyticmetadata:{convivaData:{partner_id:"samsungMyGalaxy"}},samsung_freevideo_limit:this.props.data.store.config.resultObj.config.samsung_freevideo_limit}),{},{kidsSafe:"undefined"!=typeof window&&localStorage.getItem(n.PROFILE_CONTACT_TYPE)===n.CONTACT_TYPE.KID,kidsAgeGroup:"undefined"!=typeof window&&localStorage.getItem(n.KIDS_AGE_GROUP_NAME)?localStorage.getItem(n.KIDS_AGE_GROUP_NAME):void 0,kisdsAgeGroupConfig:this.props.data.store.config&&this.props.data.store.config.resultObj&&this.props.data.store.config.resultObj.config&&this.props.data.store.config.resultObj.config.multiprofiles&&this.props.data.store.config.resultObj.config.multiprofiles.kids_age_group,isNextContentPrefeched:(null===(S=this.props)||void 0===S||null===(I=S.userDetails)||void 0===I||null===(j=I.resultObj)||void 0===j||null===(D=j.contactMessage)||void 0===D?void 0:D.length)>0&&(null===(k=this.props)||void 0===k||null===(E=k.userDetails)||void 0===E||null===(P=E.resultObj)||void 0===P||null===(w=P.contactMessage[0].subscription)||void 0===w?void 0:w.accountServiceMessage)&&(null===(A=this.props)||void 0===A||null===(N=A.userDetails)||void 0===N||null===(C=N.resultObj)||void 0===C||null===(L=C.contactMessage[0].subscription)||void 0===L||null===(V=L.accountServiceMessage)||void 0===V?void 0:V.length)>0&&(null===(G=this.props)||void 0===G||null===(F=G.userDetails)||void 0===F||null===(H=F.resultObj)||void 0===H?void 0:H.contactMessage[0].subscription.accountServiceMessage[0].isNextContentPrefetched)||!1,continueWatchAddXdr:function(e,t){ae.addXDR(e,t)},continueWatchADeleteXdr:function(e){setTimeout((function(){try{ae.deleteXDR(e)}catch(e){}}),1e3)},playNext:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(localStorage.setItem("playNextTag",!0),localStorage.setItem("gaLoginEntryPoint","binge_watching"),ae){var o,i,s,n,r=d.isMobile?(null==e||null===(o=e.metadata)||void 0===o||null===(i=o.emfAttributes)||void 0===i?void 0:i.portrait_thumb)||"":(null==e||null===(s=e.metadata)||void 0===s||null===(n=s.emfAttributes)||void 0===n?void 0:n.landscape_thumb)||"";localStorage.setItem("contentPoster",r),sessionStorage.setItem("isRouteToPlayerFlag",a),ae.navigateToPage(e,t,a);var l=Object(B.f)(e,!0);localStorage.setItem("assetToNavigate",l),null==l&&"htmedia"==localStorage.getItem("SSOSource")&&ae.setState({nextepisodecheck:!0})}},watchNow:function(e){ae&&(localStorage.setItem("isFromWatchNow",!0),ae.props.fetchDetailsPageData(e.firstEpisode.contentId,0,9).then((function(){var e,t,a,o,i,s;ae.navigateToPage(null===(e=ae.props.showDetails)||void 0===e||null===(t=e.resultObj)||void 0===t||null===(a=t.containers)||void 0===a?void 0:a[0]);var n=Object(B.f)(null===(o=ae.props.showDetails)||void 0===o||null===(i=o.resultObj)||void 0===i||null===(s=i.containers)||void 0===s?void 0:s[0],!0);localStorage.setItem("assetToNavigate",n)})).catch((function(e){})))},handleBack:function(){ae&&ae.handleBack()},fireLotameEvent:function(e){Object(x.a)(e)},handleBingeItemClick:function(e){ae&&ae.handleBingeWatchClick(e)},retryVideoUrl:function(){if(ae)return ae.retryVideoUrl()},interventionSigninClick:function(){ae&&ae.interventionSigninClick()},ShareClick:function(e){ae&&(localStorage.setItem("shareIconClick",!0),ae.shareIconClick(e))},updateSettingcallback:function(e,t){ae&&ae.videoSubtitlecallback(e,t)},shiftContentData:function(e,t){ae&&ae.shiftContentDataCallBack(e,t)},triggerToastForGAFromPlayer:function(e){ae&&e&&ae.triggerToastForGA(e),SubscriptionRediection(packID),ae&&packID&&ae.handleSubscriptionRediection(packID)},triggerToastForAdFromPlayer:function(e){ae&&e&&ae.triggerToastForAd(e)},setReminderApiFromPlayer:function(e,t,a,o,i,s){Object(_.j)(e,currentSlide,a,o,i,s)},isReminderSetPlayer:function(e){ae&&ae.isReminder(e)},addSetReminderPlayer:function(e){ae&&ae.addSetReminder(e)},addMyListPlayer:function(e){if(ae){var t,a,o,i,s=JSON.parse(sessionStorage.getItem("my_list_ids")),n=null==e||null===(t=e.resultObj)||void 0===t||null===(a=t.containers[0])||void 0===a?void 0:a.id,r=null==e||null===(o=e.resultObj)||void 0===o||null===(i=o.containers[0])||void 0===i?void 0:i.parents;r.length>0&&r[0].parentSubType&&"SHOW"===r[0].parentSubType&&r[0].parentId&&(n=r[0].parentId),s&&s.includes(n)?ae.deleteWatchlist1(e):ae.addtoWatchlistPlayer(e)}},playerReminderIds:localStorage.getItem("accessToken")&&localStorage.getItem("reminders"),getRedirectionUrl:U.a,environment:"".concat("https://apiv2.sonyliv.com"),appVersion:"".concat("3.5.2"),end_credit_timeout_secs:this.props.data.store.config.resultObj.config.end_credit_timeout_secs,skip_intro_timeout_secs:this.props.data.store.config.resultObj.config.skip_intro_timeout_secs,skip_recap_timeout_secs:this.props.data.store.config.resultObj.config.skip_recap_timeout_secs,skip_song_timeout_secs:this.props.data.store.config.resultObj.config.skip_song_timeout_secs,dai_max_retry:this.props.data.store.config.resultObj.config.dai_max_retry,dai_max_retry_interval_secs:this.props.data.store.config.resultObj.config.dai_max_retry_interval_secs,bingeTrayInfo:sessionStorage.getItem("bingeCollectionDetails")?JSON.parse(sessionStorage.getItem("bingeCollectionDetails")):null,fullscreenElement:"#dynamicPlayer",SubscriptionRediection:function(e){ae&&ae.handleSubscriptionRediection(e)}},Te),Ee),null!=("undefined"==typeof localStorage?"undefined":Y(localStorage))&&localStorage.getItem("PartnerDetails")&&(this.playermetadata.partner_id=null!=("undefined"==typeof localStorage?"undefined":Y(localStorage))&&localStorage.getItem("PartnerDetails")),null!==(J=this.props)&&void 0!==J&&null!==(W=J.history)&&void 0!==W&&null!==(K=W.location)&&void 0!==K&&null!==(X=K.state)&&void 0!==X&&X.partnerValue&&(this.playermetadata.partner_id=this.props.history.location.state.partnerValue),"undefined"!=typeof window&&localStorage.getItem("serviceID")&&(this.playermetadata.service_id=localStorage.getItem("serviceID")),void 0!==this.playermetadata.assetInfo&&("OK"===this.playermetadata.playbackInfo.resultCode?(this.playermetadata.playbackInfo.resultObj.isDVR,this.playermetadata&&this.playermetadata.playbackInfo&&this.playermetadata.playbackInfo.resultObj&&this.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==this.playermetadata.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==this.playermetadata.playbackInfo.resultObj.dai_asset_key?(this.modifyBingeData(re.resultObj.containers[0].id),this.playermetadata.bingeTrayInfo=this.getBingeTrayDetails(),this.isVideoPlayable(this.playermetadata)):""!==oe&&(this.modifyBingeData(re.resultObj.containers[0].id),this.playermetadata.bingeTrayInfo=this.getBingeTrayDetails(),this.isVideoPlayable(this.playermetadata),this.setState({isPageLoaded:!0}))):(this.modifyBingeData(re.resultObj.containers[0].id),this.playermetadata.bingeTrayInfo=this.getBingeTrayDetails(),this.isVideoPlayable(this.playermetadata),this.setState({isPageLoaded:!0}))),"?watch=true"===window.location.search&&(document.getElementById("AppHeader")&&(document.getElementById("AppHeader").style.display="none"),document.getElementById("L3MenuBar")&&(document.getElementById("L3MenuBar").style.display="none")),this.setState({episodedata:this.props.data.playerDetails}),window.isAutoplayed=!1}},{key:"updateEventDetails",value:function(){try{var e=this.props.eventDetails;this.props.fetchEventDetails({ga_current_page_id:"player_detail_screen",ga_previous_page_id:e.ga_current_page_id,ga_current_page_type:"",ga_previous_page_type:e.ga_current_page_type,source_page_id:e.source_page_id,source_page_category:e.source_page_category,page_id:e.page_id,page_category:e.page_category,type:e.type})}catch(e){}}},{key:"modifyBingeData",value:function(e){var t=sessionStorage.getItem("bingeCollectionDetails")?JSON.parse(sessionStorage.getItem("bingeCollectionDetails")):null;if(t&&t.clicked){var a=Q({},t.clicked);if(parseInt(e)===parseInt(a.contentId)){var o=Q(Q({},t),a);sessionStorage.setItem("bingeCollectionDetails",JSON.stringify(o))}else if(parseInt(e)===parseInt(t.contentId)){var i=Q(Q({},t),{},{clicked:Q(Q({},t.clicked),{},{contentId:t.contentId,range:t.range,extra:t.extra,label:t.label})});sessionStorage.setItem("bingeCollectionDetails",JSON.stringify(i))}else Object(T.i)()}}},{key:"getBingeTrayDetails",value:function(){var e=sessionStorage.getItem("bingeCollectionDetails");return e?JSON.parse(e):null}},{key:"getLivLogoObjs",value:function(){var e=this.props.data.store,t=e&&e.config&&e.config.resultObj&&e.config.resultObj.config||null,a=e&&e.branding&&e.branding.resultObj||null,o=localStorage.getItem("cluster"),i=o==n.CLUSTERS.SUBSCRIBED||o==n.CLUSTERS.SUBSCRIBED_KID;return{dynamic_liv_Icon:i?a&&a.dynamic_liv_Icon:t&&t.dynamic_liv_Icon,bg_image:i?a&&a.bg_image:t&&t.bg_image,watermark:i?a&&a.watermark:t&&t.watermark}}},{key:"componentWillReceiveProps",value:function(e){var t=this.getAssetInfo(e.type),a=this.props.keyMomentDetails;if(t.resultObj.containers[0].id!==this.playermetadata.assetInfo.resultObj.containers[0].id&&Object(M.yb)(a)||e.data.store.config!==this.props.config||this.props.configComplete!=e.data.store.configComplete){var o,i,s,r,l,c,p,u,g,m,f,y,v,b,S,I,j,D,k,E,P,w,A,N,C,L,V,G,F,x,H,J;window.scrollTo(0,0);var W=this,K={playback_url:e.data.playerDetails.resultObj?e.data.playerDetails.resultObj.videoURL:"",drm:e.data.playerDetails.resultObj?e.data.playerDetails.resultObj.isEncrypted:"",showNname:"showname",title:"title",freepreview:"N/A"},X=e.data.playerDetails,q=e.type,z=this.getAssetInfo(q),Z={basepath:"https://apiv2.sonyliv.com",country:e.data.store.country.resultObj.country_code,middleware:n.MIDDLE_WARE,version:n.VERSION,D1:"undefined"!=typeof window&&localStorage.getItem("cluster")||n.DIRECTORY_1,D2:n.DIRECTORY_2,platform:null!=("undefined"==typeof localStorage?"undefined":Y(localStorage))&&localStorage.getItem("gaID")?localStorage.getItem("gaID"):n.PLATFORM},$=e.data.store.loggedInUserDetails.resultObj,ee={streaming_quality:localStorage.getItem("accessToken")||localStorage.getItem("videoStreamingQuality")?localStorage.getItem("videoStreamingQuality"):"1",subtitle:localStorage.getItem("accessToken")&&sessionStorage.getItem("subtitles")?sessionStorage.getItem("subtitles"):localStorage.getItem("subtitles")||!0,auto_play:localStorage.getItem("accessToken")&&sessionStorage.getItem("autoPlay")?sessionStorage.getItem("autoPlay"):localStorage.getItem("autoPlay")||!0},te=Q({},ee);te.streaming_quality=this.getPlaybackQualityTitleForId(te.streaming_quality);var ae=e.analyticsDetails,oe=Object(T.F)(this.props.config,window.location.href),ie=oe?"utm ".concat(oe.utmSource||""," ").concat(oe.utmMedium||""):null,se="others";se=this.props.location&&this.props.location.state&&this.props.location.state.custome_conviva_pointData?this.props.location.state.custome_conviva_pointData:ae&&ae.conviva_point?ae.conviva_point:this.props.location&&this.props.location.state&&this.props.location.state.conviva_pointData?this.props.location.state.conviva_pointData:"others";var ne=ie||(ae&&ae.ga_entry_point?ae.ga_entry_point:"");localStorage.getItem("isFromWatchNow")?ne="watch_now_player_click":"video_streaming"==sessionStorage.getItem("subscriptionEntryPath")?ne="subscribe_vid_streamig_click":"video_ended"==sessionStorage.getItem("subscriptionEntryPath")&&(ne="go_premium_vid_end_click");var re,le,ce,de,pe,ue=this.entryPageIdgetEntryPageId(e.data.eventDetails.ga_previous_page_id),ge={entry_page_name:e.data.eventDetails.source_page_category,entry_page_id:ue,entry_source:"NA",band_title:ae&&ae.band_title?ae.band_title:"",band_id:ae&&ae.band_id?ae.band_id:"",page_id:e.data.eventDetails.page_id,page_category:e.data.eventDetails.page_category,geo_location:e.data.store.country.resultObj.country_code,subscription_status:localStorage.getItem("accessToken")&&Object(R.n)(e.data.store.loggedInUserDetails)&&Object(R.n)(e.data.store.loggedInUserDetails).subscription.subscriptionStatus?Object(R.n)(e.data.store.loggedInUserDetails).subscription.subscriptionStatus:"",advertising_id:localStorage.getItem("token"),user_id:localStorage.getItem("token"),cp_customer_id:localStorage.getItem("accessToken")&&e.data.store.loggedInUserDetails.resultObj?e.data.store.loggedInUserDetails.resultObj.cpCustomerID:"NA",partner_id:"SONYLIV",page_name:"Detail Screen",app_name:n.GA_APP_NAME,config_type:sessionStorage.getItem(n.GA_CONFIG_TYPE_TEXT),app_version:n.WEB_APP_VERSION,grid_details:Q(Q({},ae),{},{target_page_id:n.CM_DETAILS_PAGE_ID}),tvc_client_id:"NA",source_play:ae&&ae.source_play?ae.source_play:"",ga_entry_point:ne,conviva_entry_point:se,userType:localStorage.getItem("accessToken")?n.GA_SIGNED_USER:n.GA_USER_TYPE_GUEST,sub_status:1===this.props.data.userstate||0===this.props.data.userstate?h.NON_SUBSCRIPTION_STATUS:h.SUBSCRIPTION_STATUS},me={};me="OK"===e.data.store.config.resultCode&&e.data.store.config.resultObj?Q(Q({ads_config:e.data.store.config.resultObj.config.ads_config,analytics_config:e.data.store.config.resultObj.config.analytics_config,app_player_config:e.data.store.config.resultObj.config.app_player_config,auto_play_settings:e.data.store.config.resultObj.config.auto_play_settings,free_preview:e.data.store.config.resultObj.config.free_preview,setting_clevertap:e.data.store.config.resultObj.config.setting_clevertap,segment_config:e.data.store.config.resultObj.config.segment_config,sportsInteractive:e.data.store.config.resultObj.config.sportsInteractive,companion_ads:e.data.store.config.resultObj.config.companion_ads,dvr:e.data.store.config.resultObj.config.dvr,timeline_marker:e.data.store.config.resultObj.config.timeline_marker,report_error:e.data.store.config.resultObj.config.report_error,enable_conviva_api:e.data.store.config.resultObj.config.enable_conviva_api,conviva_api_timeout_seconds:e.data.store.config.resultObj.config.conviva_api_timeout_seconds,continue_Watching:e.data.store.config.resultObj.config.continue_Watching,language_iso_code:e.data.store.config.resultObj.config.language_iso_code,conviva:e.data.store.config.resultObj.config.conviva,video_concurrency_polling_interval_sec:e.data.store.config.resultObj.config.video_concurrency_polling_interval_sec,allowed_audio_on_player:e.data.store.config.resultObj.config.allowed_audio_on_player,first_party_data:this.props.data.store.config.resultObj.config.first_party_data,age_range:this.props.data.store.config.resultObj.config.age_range,videos_pending_count_ui_timeout:this.props.data.store.config.resultObj.config.videos_pending_count_ui_timeout,gpdr:!!this.props.data.store.config.resultObj.config.gdpr&&this.props.data.store.config.resultObj.config.gdpr,playable_asset_types:this.props.data.store.config.resultObj.config&&this.props.data.store.config.resultObj.config.playable_asset_types||[],tl_marker:this.props.data.store.config.resultObj.config&&this.props.data.store.config.resultObj.config.tl_marker||null,audio_languages:null===(re=this.props.data)||void 0===re||null===(le=re.store)||void 0===le||null===(ce=le.config)||void 0===ce||null===(de=ce.resultObj)||void 0===de||null===(pe=de.config)||void 0===pe?void 0:pe.audio_languages},this.getLivLogoObjs()),{},{audio_selection_timeout:this.props.data.store.config.resultObj.config.app_player_config&&this.props.data.store.config.resultObj.config.app_player_config.audio_selection_timeout}):{},this.checkentitlement(z);var he,fe,ye=d.isMobile?(null==z||null===(o=z.resultObj)||void 0===o||null===(i=o.containers[0])||void 0===i||null===(s=i.metadata)||void 0===s||null===(r=s.emfAttributes)||void 0===r?void 0:r.portrait_thumb)||"":(null==z||null===(l=z.resultObj)||void 0===l||null===(c=l.containers[0])||void 0===c||null===(p=c.metadata)||void 0===p||null===(u=p.emfAttributes)||void 0===u?void 0:u.landscape_thumb)||"";localStorage.setItem("contentPoster",ye),"undefined"!=typeof localStorage&&localStorage.getItem("reco_logic")&&(he={isReco:!0,recAlgoCode:localStorage.getItem("reco_logic")}),"IN"===(null===(g=this.props.country)||void 0===g||null===(m=g.resultObj)||void 0===m?void 0:m.country_code)&&(fe={LIV_ID:localStorage.getItem("LIV_ID")});var _e=sessionStorage&&sessionStorage.getItem("currentTrailerContent")?JSON.parse(sessionStorage.getItem("currentTrailerContent")):"";this.playermetadata=Q(Q(Q(Q({countryInfo:this.props.country.resultObj?this.props.country.resultObj:"",assetInfo:z,profileInfo:$,type:e.type,platformConfig:"web",subscriptionInfo:{},configInfo:me,completeConfig:e.data.store.config,playbackInfo:X,localeInfo:h,premiumCostText:"Starting at Rs.299/Mnth",showInfo:e.data.showDetails||null,seasonInfo:e.data.seasonsContainer||null,DestroyPlayerScreen:!(!this.props.location.state||!this.props.location.state.DestroyPlayerScreen||!0!==this.props.location.state.DestroyPlayerScreen),convivaData:ge,settings_preference:ee,settings_preference_new:te,resolution_ladder:this.props.videoResolutionLadder,selectedProfile:this.props.selectedProfile,is_lat:"true"==localStorage.getItem("isPersonalizedAdValue")?0:1,personalizedAds:"true"==localStorage.getItem("isPersonalizedAdValue"),accessToken:localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):"NA",security_token:localStorage.getItem("security_token"),DeviceID:localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),UUID:localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),PPID:"IN"===(null===(f=this.props.country)||void 0===f||null===(y=f.resultObj)||void 0===y?void 0:y.country_code)?localStorage.getItem("PPID"):localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),advertiserId:"IN"===(null===(v=this.props.country)||void 0===v||null===(b=v.resultObj)||void 0===b?void 0:b.country_code)?localStorage.getItem("baseId"):localStorage.getItem("token")?localStorage.getItem("token"):Object(O.a)(),trailer_config:(null===(S=this.props)||void 0===S||null===(I=S.featureConfig)||void 0===I?void 0:I.trailer_config)||null,isContinueWatch:localStorage.getItem("isFromWatchNow")?0:_e&&_e.resumePlaybackTime?{position:_e.resumePlaybackTime}:e.iscontinuewatch},Object(M.h)()&&{adtest_param:Object(M.h)()}),{},{apidata:Z,recommendedData:e.recommendedData,selected_contact_id:localStorage.getItem("selected_contact_id")},"undefined"!=typeof window&&localStorage.getItem("isGalaxyWebView")&&{samsung_my_galaxy_app:!0,analyticmetadata:{convivaData:{partner_id:"samsungMyGalaxy"}},samsung_freevideo_limit:this.props.data.store.config.resultObj.config.samsung_freevideo_limit}),{},{kidsSafe:!("undefined"==typeof window||!localStorage.getItem(n.PROFILE_CONTACT_TYPE)),kidsAgeGroup:!("undefined"==typeof window||!localStorage.getItem(n.KIDS_AGE_GROUP_NAME))&&localStorage.getItem(n.KIDS_AGE_GROUP_NAME),kisdsAgeGroupConfig:this.props.data.store.config&&this.props.data.store.config.resultObj&&this.props.data.store.config.resultObj.config&&this.props.data.store.config.resultObj.config.multiprofiles&&this.props.data.store.config.resultObj.config.multiprofiles.kids_age_group,isNextContentPrefeched:(null===(j=this.props)||void 0===j||null===(D=j.userDetails)||void 0===D||null===(k=D.resultObj)||void 0===k||null===(E=k.contactMessage)||void 0===E?void 0:E.length)>0&&(null===(P=this.props)||void 0===P||null===(w=P.userDetails)||void 0===w||null===(A=w.resultObj)||void 0===A||null===(N=A.contactMessage[0].subscription)||void 0===N?void 0:N.accountServiceMessage)&&(null===(C=this.props)||void 0===C||null===(L=C.userDetails)||void 0===L||null===(V=L.resultObj)||void 0===V||null===(G=V.contactMessage[0].subscription)||void 0===G||null===(F=G.accountServiceMessage)||void 0===F?void 0:F.length)>0&&(null===(x=this.props)||void 0===x||null===(H=x.userDetails)||void 0===H||null===(J=H.resultObj)||void 0===J?void 0:J.contactMessage[0].subscription.accountServiceMessage[0].isNextContentPrefetched)||!1,continueWatchAddXdr:function(e,t){W.addXDR(e,t)},continueWatchADeleteXdr:function(e){setTimeout((function(){try{W.deleteXDR(e)}catch(e){}}),1e3)},playNext:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(W){sessionStorage.setItem("isRouteToPlayerFlag",a),W.navigateToPage(e,t,a);var o=Object(B.f)(e);localStorage.setItem("assetToNavigate",o)}},watchNow:function(e){var t;W&&(localStorage.setItem("isFromWatchNow",!0),W.props.fetchDetailsPageData(null==e||null===(t=e.firstEpisode)||void 0===t?void 0:t.contentId,0,9).then((function(){var e,t,a,o,i,s;W.navigateToPage(null===(e=W.props.showDetails)||void 0===e||null===(t=e.resultObj)||void 0===t||null===(a=t.containers)||void 0===a?void 0:a[0]);var n=Object(B.f)(null===(o=W.props.showDetails)||void 0===o||null===(i=o.resultObj)||void 0===i||null===(s=i.containers)||void 0===s?void 0:s[0],!0);localStorage.setItem("assetToNavigate",n)})).catch((function(e){})))},handleBack:function(){W&&W.handleBack()},handleBingeItemClick:function(e){W&&W.handleBingeWatchClick(e)},interventionSigninClick:function(){W&&W.interventionSigninClick()},ShareClick:function(e){W&&(localStorage.setItem("shareIconClick",!0),W.shareIconClick(e))},updateSettingcallback:function(e,t){W&&W.videoSubtitlecallback(e,t)},retryVideoUrl:function(){if(W)return W.retryVideoUrl()},shiftContentData:function(e,t){W&&W.shiftContentDataCallBack(e,t)},triggerToastForGAFromPlayer:function(e){W&&e&&W.triggerToastForGA(e),SubscriptionRediection(packID),W&&packID&&W.handleSubscriptionRediection(packID)},addSetReminderPlayer:function(e){W&&W.addSetReminder(e)},addMyListPlayer:function(e){if(W){var t,a,o,i,s=JSON.parse(sessionStorage.getItem("my_list_ids")),n=null==e||null===(t=e.resultObj)||void 0===t||null===(a=t.containers[0])||void 0===a?void 0:a.id,r=null==e||null===(o=e.resultObj)||void 0===o||null===(i=o.containers[0])||void 0===i?void 0:i.parents;r.length>0&&r[0].parentSubType&&"SHOW"===r[0].parentSubType&&r[0].parentId&&(n=r[0].parentId),s&&s.includes(n)?W.deleteWatchlist1(e):W.addtoWatchlistPlayer(e)}},playerReminderIds:localStorage.getItem("accessToken")&&localStorage.getItem("reminders"),triggerToastForAdFromPlayer:function(e){W&&e&&W.triggerToastForAd(e)},setReminderApiFromPlayer:function(e,t,a,o,i,s){Object(_.j)(e,t,a,o,i,s)},isReminderSetPlayer:function(e){W&&W.isReminder(e)},getRedirectionUrl:U.a,environment:"".concat("https://apiv2.sonyliv.com"),appVersion:"".concat("3.5.2"),end_credit_timeout_secs:this.props.data.store.config.resultObj.config.end_credit_timeout_secs,skip_intro_timeout_secs:this.props.data.store.config.resultObj.config.skip_intro_timeout_secs,skip_recap_timeout_secs:this.props.data.store.config.resultObj.config.skip_recap_timeout_secs,skip_song_timeout_secs:this.props.data.store.config.resultObj.config.skip_song_timeout_secs,dai_max_retry:this.props.data.store.config.resultObj.config.dai_max_retry,dai_max_retry_interval_secs:this.props.data.store.config.resultObj.config.dai_max_retry_interval_secs,bingeTrayInfo:sessionStorage.getItem("bingeCollectionDetails")?JSON.parse(sessionStorage.getItem("bingeCollectionDetails")):null,fullscreenElement:"#dynamicPlayer",SubscriptionRediection:function(e){W&&W.handleSubscriptionRediection(e)}},he),fe),null!=("undefined"==typeof localStorage?"undefined":Y(localStorage))&&localStorage.getItem("PartnerDetails")&&(this.playermetadata.partner_id=null!=("undefined"==typeof localStorage?"undefined":Y(localStorage))&&localStorage.getItem("PartnerDetails")),"undefined"!=typeof window&&localStorage.getItem("serviceID")&&(this.playermetadata.service_id=localStorage.getItem("serviceID")),void 0!==this.playermetadata.assetInfo&&(this.playermetadata.playbackInfo.resultObj.isDVR,this.playermetadata&&this.playermetadata.playbackInfo&&this.playermetadata.playbackInfo.resultObj&&this.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==this.playermetadata.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==this.playermetadata.playbackInfo.resultObj.dai_asset_key?(this.modifyBingeData(z.resultObj.containers[0].id),this.playermetadata.bingeTrayInfo=this.getBingeTrayDetails(),this.isVideoPlayable(this.playermetadata)):""!==K.playback_url&&(this.modifyBingeData(z.resultObj.containers[0].id),this.playermetadata.bingeTrayInfo=this.getBingeTrayDetails(),this.isVideoPlayable(this.playermetadata),this.setState({isPageLoaded:!0}))),this.setState({episodedata:e.data.playerDetails})}}},{key:"componentDidUpdate",value:function(){}},{key:"getOtherSubType",value:function(e){return["FULL_MATCH","HIGHLIGHTS","SHORT_FILMS","EVENT","SPORTS_CLIPS","BEHIND_THE_SCENES","STUDIO_SHOW","DOCUMENTARY","TRAILER","PROMOTION","TEASER","MUSIC","GAMES","SECOND_SCREEN","STORY_VIDEO","STORY_IMAGE","LIVE_SPORT"].findIndex((function(e){return e==e}))>-1?e:""}},{key:"getAssetInfo",value:function(e){var t=this.getOtherSubType(e);switch(e){case"EPISODES":return this.props.data.episodeDetails;case"MOVIES":case"MOVIE_BUNDLE":return this.props.data.movieDetails;case"LIVE_CHANNEL":return this.props.data.channelDetails;case t:return this.props.data.sharedDetails}}},{key:"getGACommonParams",value:function(){var e=this.props,t=e.selectedProfile,a=e.config,o=e.loggedInUserDetails,i=this.props.userdate;return{params:Object(M.y)(o,i,a,t),screenName:Object(M.F)(this.props.eventDetails.ga_current_page_id,this.props.eventDetails.ga_current_page_type),pageId:this.props.eventDetails&&this.props.eventDetails.ga_current_page_id,previousScreen:this.props.eventDetails.ga_previous_page_id?Object(M.F)(this.props.eventDetails.ga_previous_page_id,this.props.eventDetails.ga_previous_page_type):"NA"}}},{key:"checkJunkValue",value:function(e){var t=!1,a=null;if(e)if(!e.hasOwnProperty("dateOfBirth")||null===(null==e?void 0:e.dateOfBirth)||"NA"===(null==e?void 0:e.dateOfBirth)||""===(null==e?void 0:e.dateOfBirth)||(null==e?void 0:e.dateOfBirth)<0)t=!0;else{var o=null==e?void 0:e.dateOfBirth;((a=new Date(o).getFullYear())<1917||a>2017)&&(t=!0)}return t}},{key:"isFirstVideo",value:function(){return null===localStorage.getItem("is_first_video")&&(localStorage.setItem("is_first_video",!1),!0)}},{key:"isVideoPlayable",value:function(e){var t=this,a=this.getAssetInfo(this.props.type),o=this.props,i=o.dictionary,s=(o.config,o.selectedProfile),r=o.userDetails,l=Object(R.n)(r);if(a.resultCode===n.SUCCESS_RESULT_CODE){var c=a.resultObj.containers[0].metadata,p=c.ratingEligibility,u=(c.pcVodLabel,!("undefined"==typeof window||!sessionStorage.getItem("utm_medium")));if(this.checkJunkValue(l)&&this.isFirstVideo()&&this.state.showAgeGenderPopUp&&!Object(M.tb)(this.props.config)&&"true"!==localStorage.getItem("isGDPRCountry"))this.setState({componentToBeRendered:"agegenderPopup",shouldShowAgeGenderIntervention:!0,playerMetData:e});else if(p)if(localStorage.getItem("accessToken"))this.setState({componentToBeRendered:"player"},(function(){var a,o,i;t.playermetadata&&t.playermetadata.playbackInfo&&t.playermetadata.playbackInfo.resultObj&&t.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==e.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==e.playbackInfo.resultObj.dai_asset_key?e.DeviceID&&window.ima_dai_method(e):(null!==(a=t.props.configComplete)&&void 0!==a&&null!==(o=a.data)&&void 0!==o&&o.resultObj&&e.DeviceID&&window.iniatilizePlayer("","",e),null!==(i=window)&&void 0!==i&&i.deletePrefetchedLicense&&setTimeout((function(){window.deletePrefetchedLicense("all")}),2e3))}));else if(d.isMobile||localStorage.getItem("isGalaxyWebView"))p?this.setState({componentToBeRendered:"player"},(function(){t.playermetadata&&t.playermetadata.playbackInfo&&t.playermetadata.playbackInfo.resultObj&&t.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==e.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==e.playbackInfo.resultObj.dai_asset_key?e.DeviceID&&window.ima_dai_method(e):e.DeviceID&&window.iniatilizePlayer("","",e)})):this.setState({componentToBeRendered:"inOrganicSignin"});else if(p)this.setState({componentToBeRendered:"player"},(function(){t.playermetadata&&t.playermetadata.playbackInfo&&t.playermetadata.playbackInfo.resultObj&&t.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==e.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==e.playbackInfo.resultObj.dai_asset_key?e.DeviceID&&window.ima_dai_method(e):e.DeviceID&&window.iniatilizePlayer("","",e)}));else{var g={from:this.props.history.location.pathname,videoTriggerSignin:!0};localStorage.setItem("assetToNavigate","".concat(this.props.data.match.url,"?watch=true")),this.loginInitiateGA(),this.props.history.push("/signin",g)}else if(localStorage.getItem("accessToken"))s&&"Kid"===s.contactType?"SVOD"===a.resultObj.containers[0].metadata.emfAttributes.value?"SRK"===localStorage.getItem("cluster")?null!=("undefined"==typeof sessionStorage?"undefined":Y(sessionStorage))&&sessionStorage.getItem("parentalpin_given")||null!=("undefined"==typeof sessionStorage?"undefined":Y(sessionStorage))&&sessionStorage.getItem("subscriptionParentalPinGiven")?this.setState({componentToBeRendered:"player"},(function(){t.playermetadata&&t.playermetadata.playbackInfo&&t.playermetadata.playbackInfo.resultObj&&t.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==e.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==e.playbackInfo.resultObj.dai_asset_key?e.DeviceID&&window.ima_dai_method(e):e.DeviceID&&window.iniatilizePlayer("","",e)})):Object(R.u)()?this.setState({componentToBeRendered:"parentalPin"}):this.setState({showAgeGateToast:!0,ageGateToastOptions:{message:i&&i.pc_not_set_playback_error||h.PC_NOT_SET_PLAYBACK_ERROR,error:!1}}):this.props.history.push("/subscription"):null!=("undefined"==typeof sessionStorage?"undefined":Y(sessionStorage))&&sessionStorage.getItem("parentalpin_given")||null!=("undefined"==typeof sessionStorage?"undefined":Y(sessionStorage))&&sessionStorage.getItem("subscriptionParentalPinGiven")?this.setState({componentToBeRendered:"player"},(function(){t.playermetadata&&t.playermetadata.playbackInfo&&t.playermetadata.playbackInfo.resultObj&&t.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==e.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==e.playbackInfo.resultObj.dai_asset_key?e.DeviceID&&window.ima_dai_method(e):e.DeviceID&&window.iniatilizePlayer("","",e)})):Object(R.u)()?this.setState({componentToBeRendered:"parentalPin"}):this.setState({showAgeGateToast:!0,ageGateToastOptions:{message:i&&i.pc_not_set_playback_error||h.PC_NOT_SET_PLAYBACK_ERROR,error:!1}}):this.setState({componentToBeRendered:"player"},(function(){t.playermetadata&&t.playermetadata.playbackInfo&&t.playermetadata.playbackInfo.resultObj&&t.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==e.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==e.playbackInfo.resultObj.dai_asset_key?e.DeviceID&&window.ima_dai_method(e):e.DeviceID&&window.iniatilizePlayer("","",e)}));else if(d.isMobile||localStorage.getItem("isGalaxyWebView"))this.setState({componentToBeRendered:"inOrganicSignin"});else{var m={from:this.props.history.location.pathname},f=this.props.dictionary.login_signin_playback_msg||h.login_signin_playback_msg;u?(m.signInTextDesc=f,m.oneBoxMedium=!0):m.videoTriggerSignin=!0,localStorage.setItem("assetToNavigate","".concat(this.props.data.match.url).concat("undefined"!=typeof window&&localStorage.getItem("accessToken")?"?watch=true":"")),this.props.history.push("/signin",m)}localStorage.removeItem("isFromWatchNow")}}},{key:"retryVideoUrl",value:function(){var e,t,a=this.getAssetInfo(this.props.type);localStorage.getItem("accessToken")&&0==Object.keys(this.props.data.store.loggedInUserDetails).length?(e=localStorage.getItem("user_profile_data"),t=localStorage.getItem("user_state")):(e=this.props.data.store.loggedInUserDetails,t=this.props.data.store.userState);var o=Object(T.X)(t,e,a),i=this.props.data.store.country,s=i&&i.resultObj&&i.resultObj.country_code||"IN";return Object(T.e)(this.getUrlparams(this.props.data.match.params.id),o,s,this.props.config)}},{key:"getUrlparams",value:function(e){var t=e.split("?")[0].substr(e.split("?")[0].lastIndexOf("/")+1).split(/\s*\-\s*/g);return t[t.length-1]}},{key:"checkentitlement",value:function(e){if("undefined"!=typeof window&&sessionStorage.getItem("isRouteToPlayerFlag")&&JSON.parse(sessionStorage.getItem("isRouteToPlayerFlag")))return sessionStorage.removeItem("isRouteToPlayerFlag"),!0;if(e.resultObj.containers[0].metadata&&null!==e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes.value!==n.IS_FREE&&e.resultObj.containers[0].metadata.emfAttributes.is_preview_enabled);else if(localStorage.getItem("accessToken")){if(e.resultObj.containers[0].metadata&&null!==e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes.value!==n.IS_FREE&&this.props.data.store.loggedInUserDetails.resultCode==n.SUCCESS_RESULT_CODE){var t=this.props.data.store.loggedInUserDetails.resultObj.contactMessage[0].subscription.accountServiceMessage?this.props.data.store.loggedInUserDetails.resultObj.contactMessage[0].subscription.accountServiceMessage:[],a=!1;if(t.length>0&&t.map((function(t){var o,i=e.resultObj.containers[0].metadata.emfAttributes.packageid.split(","),s=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=X(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,n=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,s=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw s}}}}(i);try{for(s.s();!(o=s.n()).done;)if(o.value==t.serviceID){a=!0;break}}catch(e){s.e(e)}finally{s.f()}return i})),0==a&&e.resultObj.containers[0].metadata&&null!==e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes.value!==n.IS_FREE){var o=e.resultObj.containers[0].metadata.emfAttributes.packageid||null;localStorage.setItem("selectedAssetPackId",o),sessionStorage.setItem("selectedAssetPackIdLogin",o),localStorage.setItem("assetToNavigate","".concat(this.props.data.match.url).concat("undefined"!=typeof window&&localStorage.getItem("accessToken")?"?watch=true":"")),""!==o&&void 0!==o?this.props.data.history.push("/subscription?pack_id="+o):this.props.data.history.push("/subscription")}}}else if(e.resultObj.containers[0].metadata&&null!==e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes&&e.resultObj.containers[0].metadata.emfAttributes.value!==n.IS_FREE){var i=e.resultObj.containers[0].metadata.emfAttributes.packageid||null;localStorage.setItem("selectedAssetPackId",i),sessionStorage.setItem("selectedAssetPackIdLogin",i),localStorage.setItem("assetToNavigate","".concat(this.props.data.match.url).concat("undefined"!=typeof window&&localStorage.getItem("accessToken")?"?watch=true":"")),this.props.data.history.push("/subscription")}}},{key:"addXDR",value:function(e,t){var a,o=[];if(sessionStorage.getItem("sonyliv_xdr"))a=JSON.parse(sessionStorage.getItem("sonyliv_xdr")),o=Object(y.e)(e,t),(a=Object(M.j)(a,e.resultObj.containers[0].metadata.contentId)).unshift(o),sessionStorage.setItem("sonyliv_xdr",JSON.stringify(a));else{var i=Object(y.e)(e,t);o.push(i),sessionStorage.setItem("sonyliv_xdr",JSON.stringify(o))}}},{key:"deleteXDR",value:function(e){if(localStorage.getItem("sonyliv_xdr")){var t=JSON.parse(localStorage.getItem("sonyliv_xdr")).filter((function(t){return t.metadata.contentId!==e}));sessionStorage.setItem("sonyliv_xdr",JSON.stringify(t)),localStorage.setItem("sonyliv_xdr",JSON.stringify(t))}}},{key:"head",value:function(){return i.a.createElement(c.a,null)}},{key:"checkshare",value:function(){var e={title:this.state.landingPageData.resultObj.containers[0].metadata.title,text:this.state.landingPageData.resultObj.containers[0].metadata.longDescription,url:window.location.href};try{navigator.share(e)}catch(e){}}},{key:"sharing",value:function(){this.setState({isOpen:!0})}},{key:"shareIconClick",value:function(e){var t=this;if(localStorage.getItem("isGalaxyWebView")){var a=e&&e.metadata||null,o=window.location.pathname;return i.a.createElement(j.a,{trigger:i.a.createElement("img",{className:"logix-share-icon",src:V,alt:"share",onClick:function(){return t.sharing()}}),url:o,open:this.state.isOpen,action:this.hidepopup,metadata:a,pageDetails:this.props.eventDetails,isFrom:localStorage.getItem("isGalaxyWebView")?"withPlayer":null})}var s={title:e.title,text:e.description,url:window.location.href};try{navigator.share(s)}catch(t){var r=e&&e.metadata||null;e.isShareClick&&1==e.isShareClick&&this.setState({isOpen:!0});var l=window.location.href;return i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,{trigger:i.a.createElement("img",{className:"logix-share-icon",src:V,alt:"share"}),url:l,open:this.state.isOpen,action:this.hidepopup,metadata:r,pageDetails:this.props.eventDetails,bannerType:n.CM_DETAILS_PLAYER}))}}},{key:"videoSubtitlecallback",value:function(e,t){var a=this.props.data.store.loggedInUserDetails,o=this.props.data.store.country,i=o&&o.resultObj&&o.resultObj.country_code||"IN";Q({},this.state.settings)[e]=t,localStorage.getItem("accessToken")?"videoStreamingQuality"===e?localStorage.setItem(e,t):Object(L.b)(ie({},e,t),i,a).then((function(){sessionStorage.setItem(e,t)})).catch((function(e){throw e})):localStorage.setItem(e,t)}},{key:"hidepopup",value:function(){window.isShareClick=!1,this.setState({isOpen:!1})}},{key:"ScrollCheck",value:function(){var e=document.scrollingElement.scrollTop;if(document.getElementById("DownloadBannerDiv")&&"none"!==document.getElementById("DownloadBannerDiv").style.display)if(e>=65)document.getElementById("myModal").style.top="0";else if(0==e)document.getElementById("myModal").style.removeProperty("top");else{var t=65-e;document.getElementById("myModal").style.top=t<=10?10:t+"px"}}},{key:"handleBack",value:function(){var e,t,a,o,i,s=this.props.data,r=s.eventDetails,l=(s.episodeDetails,s.showDetails),c="";"MOVIES"==this.props.type||"MOVIE_BUNDLE"==this.props.type?c=this.props.data.movieDetails:"EPISODES"==this.props.type?c=this.props.data.episodeDetails:"LIVE_CHANNEL"==this.props.type?c=this.props.data.channelDetails:("HIGHLIGHTS"==this.props.type||"TRAILER"==this.props.type||null!==(e=this.props)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.sharedDetails&&"undefined"!==(null===(a=this.props)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.sharedDetails))&&(c=this.props.data.sharedDetails);var p,u=Object(M.F)(r.ga_current_page_id,r.ga_current_page_type);try{p=this.props.pageType||"details_page"==(r&&r.ga_current_page_id)?Object(M.eb)("details",cardTitle,null):"NA"}catch(e){}var g=r.page_id,m=Object(M.F)(r.ga_previous_page_id,r.ga_previous_page_type)||"NA";if("video player screen"!=u&&Object(G.L)(h.Back_BUTTON_CLICK,h.VIDEO_SHOW_CASE,h.Back_BUTTON_ACTION,h.Back_eventLabel,u,p,g,m),c){var f=Object(M.F)(r.ga_current_page_id,r.ga_current_page_type),y=r.ga_current_page_id,_=Object(M.F)(r.ga_previous_page_id,r.ga_previous_page_type)||"NA",v=Object(M.W)(this.props.userDetails,this.props.userState),b=("undefined"!=typeof window&&localStorage.getItem("gaLoginEntryPoint")&&localStorage.getItem("gaLoginEntryPoint"),localStorage.getItem("accessToken")?"Logged in":"Non-loggged in"),S=null!=v&&v.LoggedInMedium?v.LoggedInMedium:"",O=v.SubscriptionStatus,j=v.SubscribedPackSKU,D=v.UserAge,k=v.UserGender,T=v.MultiProfileCategory,E=v.ProfileNumber,P=v.NoOfProfilesPresent,w=this.props.selectedProfile?this.props.selectedProfile.contactType===n.CONTACT_TYPE.KID?"Kid "+this.props.selectedProfile.ageGroup:n.GA_USER_TYPE_ADULT:"",A=null!=window.playerGlobalVariables.get("isAutoPlayed")&&1==window.playerGlobalVariables.get("isAutoPlayed")?n.GA_YES:n.GA_NO,N={};N.ContentId=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.contentId||"NA",N.ShowName=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.title||"NA",N.VideoTitle=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.episodeTitle||"NA",N.SeasonNumber=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&parseInt(c.resultObj.containers[0].metadata.season)||"NA",N.EpisodeNumber=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&parseInt(c.resultObj.containers[0].metadata.episodeNumber)||"NA",N.VideoLength=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.duration&&1e3*c.resultObj.containers[0].metadata.duration||"NA",N.VideoGenre=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.genres&&c.resultObj.containers[0].metadata.genres.join(",")||"NA",N.VideoCategory=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].categories[0]&&c.resultObj.containers[0].categories[0].categoryName||"NA",N.VideoSubType=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.objectSubtype||"NA",N.VideoValue=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.emfAttributes&&c.resultObj.containers[0].metadata.emfAttributes.value||"NA",N.VideoViewType=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.contentType||"NA",N.BroadcastChannel=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.emfAttributes&&c.resultObj.containers[0].metadata.emfAttributes.broadcast_channel||"",N.VideoLanguage=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.language||"",N.AdSupport=c&&c.resultObj&&c.resultObj.containers&&c.resultObj.containers[0]&&c.resultObj.containers[0].metadata&&c.resultObj.containers[0].metadata.emfAttributes&&c.resultObj.containers[0].metadata.emfAttributes.advertising||"",N.TimeTakeToLoadVideo="NA",N.TimeToLoadPlayer="NA",N.PlayerMode=d.isMobile?"Portrait":"Landscape",N.ChromeCast=n.GA_CHROME_CAST,N.isAutoplayed=A,Object(G.L)(h.Back_BUTTON_CLICK,h.Back_BUTTON_EVENT_CATEGORY,h.Back_BUTTON_EVENT_ACTION,h.Back_BUTTON_EVENT_LABEL,f,y,_,b,S,O,j,D,k,T,E,P,w,N),sessionStorage.removeItem("videoDetails"),window.playerGlobalVariables.set("isAutoPlayed",!1)}localStorage.removeItem("playNextTag"),window.destroyingPlayer();try{JSON.parse(sessionStorage.getItem("demoModeData"))&&JSON.parse(sessionStorage.getItem("demoModeData")).demo_mode&&window.xhook.enable()}catch(e){}var C=this.props.data.userstate,R=this.getAssetInfo(this.props.type),L=R&&R.resultObj&&R.resultObj.containers[0],U=R&&R.resultObj&&R.resultObj.containers[0]&&R.resultObj.containers[0].metadata||null,B=Object(I.h)(L,C,U&&U.emfAttributes?U.emfAttributes.value:null,null),V=null!=localStorage&&localStorage.getItem("playNextTag")||"EPISODES"==(null===(i=this.props)||void 0===i?void 0:i.type)?window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")):window.location.pathname,F=l&&l.resultObj&&l.resultObj.containers&&l.resultObj.containers[0]&&l.resultObj.containers[0].metadata&&l.resultObj.containers[0].metadata.contentId||"";if(d.isMobile||"undefined"!=typeof localStorage&&localStorage.getItem("isGalaxyWebView"))try{if(localStorage.getItem("fromEpisodeListing")){var x=localStorage.getItem("fromEpisodeListing")&&JSON.parse(localStorage.getItem("fromEpisodeListing"));x&&x.showId===F?this.props.data.history.push(x.backRoute):this.props.data.history.push(V),localStorage.removeItem("fromEpisodeListing")}else{var H=this.props.location&&this.props.location.state&&this.props.location.state.backToDetailPage?this.props.location.state.backToDetailPage:"";H?this.props.data.history.push(H):localStorage.getItem("episodePrevPath")?(this.props.data.history.push(localStorage.getItem("episodePrevPath")),localStorage.removeItem("episodePrevPath")):localStorage.getItem("prevPath")?localStorage.getItem("prevPath").includes("/listing")?this.props.data.history.goBack():this.props.data.history.push(localStorage.getItem("prevPath")):this.props.data.history.push("/")}}catch(e){}else{var J=this.props.location&&this.props.location.state&&this.props.location.state.backToDetailPage?this.props.location.state.backToDetailPage:"";if(localStorage.getItem("fromEpisodeListing")){var W=localStorage.getItem("fromEpisodeListing")&&JSON.parse(localStorage.getItem("fromEpisodeListing"));W&&W.showId==F?this.props.data.history.push(W.backRoute):this.props.data.history.push(V),localStorage.removeItem("fromEpisodeListing")}else J?this.props.data.history.push(J):this.props.data.history.push(V)}return B?B.replace("?watch=true",""):"#"}},{key:"interventionSigninClick",value:function(){this.props.interventionSigninClick()}},{key:"shiftContentDataCallBack",value:function(e,t){var a="56.2vw";e?this.setState({customAdHeight:{top:"calc(".concat(a," + ").concat(t,"px)")}}):this.setState({customAdHeight:{top:a}})}},{key:"triggerToastForGA",value:function(e){Object(M.Sb)(e)}},{key:"addSetReminder",value:function(e){var t,a,o,i,s,r,l,c=this,d=null==e||null===(t=e.resultObj)||void 0===t||null===(a=t.containers[0])||void 0===a?void 0:a.id,p=null==e||null===(o=e.resultObj)||void 0===o||null===(i=o.containers[0])||void 0===i?void 0:i.id,u=(null==e||null===(s=e.resultObj)||void 0===s||null===(r=s.containers[0])||void 0===r?void 0:r.parents)||null;(null==u?void 0:u.length)>0&&u[0].parentSubType&&"SHOW"===u[0].parentSubType&&u[0].parentId&&(p=u[0].parentId);var g=this.props.data.store.country,m=g&&g.resultObj&&g.resultObj.country_code||"IN",f=this.props.data.store.loggedInUserDetails.resultObj?this.props.data.store.loggedInUserDetails.resultObj:"undefined"!=typeof localStorage&&localStorage.getItem("accessToken")?"undefined"!=typeof localStorage&&null!==localStorage.getItem("user_profile_data")&&JSON.parse(localStorage.getItem("user_profile_data")).resultObj:"",y=null===(l=JSON.parse(localStorage.getItem("reminders")))||void 0===l?void 0:l.filter((function(e){return e.assetId==d})),b=[];try{var S=JSON.parse(localStorage.getItem("playBack_reminders"));b=[].concat(K(b),K(S))}catch(e){}if("undefined"!=typeof window&&localStorage.getItem("accessToken"))Object(T.q)(d,m).then((function(e){var t,a,o,i,s,r,l,u,g,S,I,O,j,D,k,T="",E="",P=e;"LIVE_SPORT"==((null==e||null===(t=e.resultObj)||void 0===t||null===(a=t.containers[0])||void 0===a||null===(o=a.metadata)||void 0===o?void 0:o.objectSubType)||"")?(T=null==e||null===(i=e.resultObj)||void 0===i||null===(s=i.containers[0])||void 0===s||null===(r=s.metadata)||void 0===r||null===(l=r.emfAttributes)||void 0===l||null===(u=l.matchid)||void 0===u?void 0:u.split(":")[0],E=null==e||null===(g=e.resultObj)||void 0===g||null===(S=g.containers[0])||void 0===S||null===(I=S.metadata)||void 0===I||null===(O=I.emfAttributes)||void 0===O?void 0:O.match_start_time):E=null==e||null===(j=e.resultObj)||void 0===j||null===(D=j.containers[0])||void 0===D||null===(k=D.metadata)||void 0===k?void 0:k.contractStartDate,y.length<=0?(Object(_.b)(d,T,E,m,f).then((function(e){var t=e.resultCode;if(t===n.SUCCESS_RESULT_CODE){try{if(b.push(T),localStorage.setItem("playBack_reminders",JSON.stringify(b)),"undefined"!=typeof localStorage&&localStorage.getItem("reminders")){var a=JSON.parse(localStorage.getItem("reminders"));a.push({assetId:JSON.stringify(d),startDateTime:JSON.stringify(E)}),localStorage.setItem("reminders",JSON.stringify(a))}}catch(e){}c.props.reminderSetPlayer(!0),c.setState({showToastPop:!0,toastOptionsReminder:{message:h.FIXTURE_REMINDER_ADD_SUCCESS||"Check",error:!1}}),window.dispatchEvent(c.reminderEvent);var o=c.getCleverTapReminderParams(c.props.data.eventDetails,d,P);Object(H.k)(n.CleverTapEvents.SI_SET_REMINDER,o)}else t===n.FAILURE_RESULT_CODE&&c.setState({showToastPop:!0,toastOptionsReminder:{message:h.FIXTURE_REMINDER_REMOVE_FAIL||"Check",error:!0}})})),Object(v.b)(p,m,c.props.userDetails).then((function(e){})).catch((function(e){}))):(Object(_.c)(d,m,f).then((function(e){var t=e.resultCode;if(t===n.SUCCESS_RESULT_CODE){var a=b.indexOf(T);a&&b.splice(a,0),c.setState({showToastPop:!0,toastOptionsReminder:{message:h.FIXTURE_REMINDER_REMOVE_SUCCESS||"Check",error:!1}});try{if("undefined"!=typeof localStorage&&localStorage.getItem("reminders")){var o=JSON.parse(localStorage.getItem("reminders"));if(o.length>0){var i=o.findIndex((function(e){return e.assetId==d}));i>-1&&o.splice(i,1),localStorage.setItem("reminders",JSON.stringify(o)),c.props.reminderSetPlayer(!1)}}if("undefined"!=typeof localStorage&&localStorage.getItem("playBack_reminders")){var s=JSON.parse(localStorage.getItem("playBack_reminders")),r=s.indexOf(T);r>-1&&(s.splice(r,1),localStorage.setItem("playBack_reminders",JSON.stringify(s)))}}catch(e){}window.dispatchEvent(c.reminderEvent);var l=c.getCleverTapReminderParams(c.props.eventDetails,d,P);Object(H.l)(n.CleverTapEvents.SI_REMOVE_REMINDER,l)}else t===n.FAILURE_RESULT_CODE&&c.setState({showToastPop:!0,toastOptionsReminder:{message:h.FIXTURE_REMINDER_REMOVE_FAIL||"Check",error:!0}})})).catch((function(e){})),Object(v.d)(p,m,c.props.userDetails).then((function(e){})).catch((function(e){})))}));else{"undefined"!=typeof window&&localStorage.setItem("setReminderId",d);var I=this.props&&this.props.history&&this.props.history.location&&this.props.history.location.pathname;this.props.history.push("/signin",{from:I})}}},{key:"deleteWatchlist1",value:function(e){var t,a,o,i,s=this,r=null==e||null===(t=e.resultObj)||void 0===t||null===(a=t.containers[0])||void 0===a?void 0:a.id,l=this.props.data.store.country,c=l&&l.resultObj&&l.resultObj.country_code||"IN",d=null==e||null===(o=e.resultObj)||void 0===o||null===(i=o.containers[0])||void 0===i?void 0:i.parents;d.length>0&&d[0].parentSubType&&"SHOW"===d[0].parentSubType&&d[0].parentId&&(r=d[0].parentId),Object(v.d)(r,c,this.props.data.store.loggedInUserDetails).then((function(e){if("OK"===e.resultCode){var t=JSON.parse(sessionStorage.getItem("my_list_ids"));t=t?t.filter((function(e){return e!==r})):[],s.setState({showToastPop:!0,toastOptionsReminder:{message:s.props.dictionary&&s.props.dictionary.mylist_removed||h.mylist_removed,error:!1}}),sessionStorage.setItem("my_list_ids",JSON.stringify(t)),s.props.myListSetPlayer(!1),window.dispatchEvent(s.mylistEvent)}else e.resultCode===n.FAILURE_RESULT_CODE&&s.setState({showToastPop:!0,toastOptionsReminder:{message:h.REMOVE_FROM_MY_LIST_FAIL||"Failed to Remove from myList",error:!0}})})).catch((function(e){}))}},{key:"addtoWatchlistPlayer",value:function(e){Object(M.Pb)();try{var t=localStorage.getItem("accessToken");if(null==t){if(localStorage.setItem("addToMyList",!0),localStorage.setItem("hideSignInToast",!0),localStorage.setItem("closeSignInPopup",!0),d.isMobile)try{if(document.getElementById("html5Player_ima-play-pause-div")&&document.getElementById("html5Player_ima-play-pause-div").className.includes("ima-playing")&&document.getElementById("html5Player_ima-play-pause-div").click(),document.getElementById("main_video")&&document.getElementById("main_video").children&&document.getElementById("main_video").children[0]&&document.getElementById("main_video").children[0].children&&document.getElementById("main_video").children[0].children[0]&&document.getElementById("main_video").children[0].children[0].play){var a=document.getElementById("main_video").children[0].children[0].play();void 0!==a&&a.then((function(){document.getElementById("main_video").children[0].children[0].pause()})).catch((function(e){}))}}catch(e){}this.props.history.push("/signin",{from:this.props.location.pathname})}else this.addToMyList(e)}catch(e){}}},{key:"addToMyList",value:function(e){var t,a,o,i=this,s=null===(t=e.resultObj.containers[0].metadata)||void 0===t?void 0:t.contentId,r=this.props.data.store.country,l=r&&r.resultObj&&r.resultObj.country_code||"IN",c=null==e||null===(a=e.resultObj)||void 0===a||null===(o=a.containers[0])||void 0===o?void 0:o.parents;c.length>0&&c[0].parentSubType&&"SHOW"===c[0].parentSubType&&c[0].parentId&&(s=c[0].parentId),Object(v.b)(s,l,this.props.data.store.loggedInUserDetails).then((function(t){if("OK"===t.resultCode){var a=e&&e.resultObj&&e.resultObj.containers&&e.resultObj.containers[0]&&e.resultObj.containers[0].metadata||{};JSON.parse(sessionStorage.getItem("my_list_ids")),localStorage.setItem("add_to_list_".concat(a.contentId),JSON.stringify(a.contentId)),Object(J.c)(s),Object(M.Xb)(),i.props.myListSetPlayer(!0),window.dispatchEvent(i.mylistEvent),i.setState({showToastPop:!0,toastOptionsReminder:{message:i.props.dictionary&&i.props.dictionary.mylist_added||h.mylist_added,error:!1}})}else t.resultCode===n.FAILURE_RESULT_CODE&&i.setState({showToastPop:!0,toastOptionsReminder:{message:h.ADD_FROM_MY_LIST_FAIL||"Failed to Add MyList",error:!0}})})).catch((function(e){}))}},{key:"triggerToastForAd",value:function(e){Object(M.Tb)(e)}},{key:"isReminder",value:function(e){var t,a=null===(t=JSON.parse(localStorage.getItem("sports_reminders")))||void 0===t?void 0:t.filter((function(t){return t==e}));return!((null==a?void 0:a.length)<=0)}},{key:"handleBingeWatchClick",value:function(e){var t=sessionStorage.getItem("bingeCollectionDetails"),a=t?JSON.parse(t):null;if(a&&2===e.range.length&&e.contentId){var o=Q(Q({},a),{},{clicked:Q(Q({},a.clicked),{},{range:e.range,contentId:e.contentId})});sessionStorage.setItem("bingeCollectionDetails",JSON.stringify(o))}else sessionStorage.removeItem("bingeCollectionDetails")}},{key:"handleBackClickOfParentalPin",value:function(){this.props.history.goBack()}},{key:"afterPinValidaton",value:function(){var e=this;sessionStorage.setItem("parentalpin_given",!0),this.setState({componentToBeRendered:"player"},(function(){e.playermetadata&&e.playermetadata.playbackInfo&&e.playermetadata.playbackInfo.resultObj&&e.playermetadata.playbackInfo.resultObj.dai_asset_key&&""!==e.playermetadata.playbackInfo.resultObj.dai_asset_key.trim()&&void 0!==e.playermetadata.playbackInfo.resultObj.dai_asset_key?e.playermetadata.DeviceID&&window.ima_dai_method(e.playermetadata):e.playermetadata.DeviceID&&window.iniatilizePlayer("","",e.playermetadata)}))}},{key:"onToastHide",value:function(){this.setState({showAgeGateToast:!1}),this.props.history.goBack()}},{key:"onToastHideReminder",value:function(){this.setState({showToastPop:!1})}},{key:"onIdle",value:function(){this.props.data.history.push("/signout"),localStorage.clear(),window.location.reload()}},{key:"hideAgeGenderIntervention",value:function(){var e=this;this.setState({shouldShowAgeGenderIntervention:!1,showAgeGenderPopUp:!1},(function(){e.isVideoPlayable(e.state.playerMetData),e.setState({playerMetData:{}})}))}},{key:"render",value:function(){var e,t=this,a=this.props,o=a.dictionary,s=a.country,l=a.userDetails,c=a.config,p=Object(R.n)(l),u=localStorage.getItem(n.CONTACT_ID_KEY),g=u&&l&&l.resultObj&&l.resultObj.contactMessage&&l.resultObj.contactMessage.find((function(e){return e.contactID===u}))||null,m=c.resultObj&&c.resultObj.config&&c.resultObj.config.multiprofiles&&c.resultObj.config.multiprofiles.default_avatar_image||F.a,y=g?{name:g.firstName,icon:g.profilePic||m}:null,_=this.props,v=_.toastOptions,I=_.showToast,O=localStorage.getItem("SSOSource");if(O&&this.props.config.resultObj.config.b2bpartner_config.filter((function(e){return e.partner==O})).map((function(t){e=t.config_value.inactive_session_duration})),this.state.redirect)return setTimeout((function(){window.location.reload()}),0),i.a.createElement(S.a,{to:this.state.redirect});try{document&&document.getElementById("companionDiv")&&"block"===document.getElementById("companionDiv").style.display?this.isAdPresent=!0:this.isAdPresent=!1}catch(e){}return i.a.createElement(i.a.Fragment,null,this.state.showSyndicatePopup?i.a.createElement(C.a,{onClosePopUp:this.SyndicatepopUpClose}):"",i.a.createElement(i.a.Fragment,null,"htmedia"==localStorage.getItem("SSOSource")&&localStorage.getItem("accessToken")?i.a.createElement(r.a,{ref:this.idleTimerRef,timeout:1e3*e,onIdle:this.onIdle.bind(this)}):i.a.createElement(i.a.Fragment,null),"htmedia"==localStorage.getItem("SSOSource")&&localStorage.getItem("accessToken")&&this.state.showTimeOut&&this.props.data.history.push("/signout"),this.props.head(),"player"===this.state.componentToBeRendered&&"undefined"!=typeof localStorage&&"V2"==localStorage.getItem("LAST_PLAYER_VERSION")?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"playerDetails"},i.a.createElement("div",{id:"companionDiv"}),d.isMobileOnly&&i.a.createElement("div",{className:"assetMetatadata ".concat(this.isAdPresent?"playerMetadata":""),style:this.state.customAdHeight},this.props.renderActions(),this.props.renderTitle(),this.props.renderShortDescription(),this.props.renderOneLineMetadata(),this.props.renderTrays()),i.a.createElement("div",null,!0===I?i.a.createElement(f.a,{toastOptions:v,onClose:function(){return t.props.onToastHide()}}):null),i.a.createElement("div",null,1==this.state.showToastPop?i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{toastOptions:this.state.toastOptionsReminder,onClose:function(){return t.onToastHideReminder()}})):null),this.props.renderInorganicSignin&&this.props.renderInorganicSignin())):"player"===this.state.componentToBeRendered?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"playerDetails"},i.a.createElement("div",{id:"myModal"},i.a.createElement("div",{id:"Drm_play"}),i.a.createElement("div",{id:"main_video"}),i.a.createElement("div",{id:"Dvr_Video"}),i.a.createElement("div",{id:"TVDevice"})),i.a.createElement("div",{id:"companionDiv"}),d.isMobileOnly&&i.a.createElement("div",{className:"assetMetatadata ".concat(this.isAdPresent?"playerMetadata":""),style:this.state.customAdHeight},this.props.renderActions(),this.props.renderTitle(),this.props.renderShortDescription(),this.props.renderOneLineMetadata(),this.props.renderTrays()),i.a.createElement("div",null,!0===I?i.a.createElement(f.a,{toastOptions:v,onClose:function(){return t.props.onToastHide()}}):this.props.mobileMoreDolbyMetaData?i.a.createElement(f.a,{toastOptions:v,onClose:function(e){return t.props.onToastHide(e)}}):null),i.a.createElement("div",null,1==this.state.showToastPop?i.a.createElement(f.a,{toastOptions:this.state.toastOptionsReminder,onClose:function(){return t.onToastHideReminder()}}):null),this.props.renderInorganicSignin&&this.props.renderInorganicSignin())):"parentalPin"===this.state.componentToBeRendered?i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{dictionary:o,country:s,profileDetails:y,selectedProfile:g,config:this.props.config,eventDetails:this.props.eventDetails,primaryProfile:p,onBackClick:function(){return t.handleBackClickOfParentalPin()},handleAfterValidation:function(){return t.afterPinValidaton()}})):"inOrganicSignin"===this.state.componentToBeRendered?i.a.createElement(i.a.Fragment,null,i.a.createElement(E.h,{fromDetailsPage:!0}),i.a.createElement(A.a,{contextualMsg:h.contextual_signin_playback_msg,headerText:h.SIGN_IN_TO_WATCH,userButton:this.state.show,history:this.props.history,pageDetails:this.props.eventDetails,closeCallback:function(e){return t.closeContestualSignin(e)},videoTriggerSignin:!0})):"agegenderPopup"===this.state.componentToBeRendered?i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{open:this.state.shouldShowAgeGenderIntervention,submitCallback:this.hideAgeGenderIntervention,skipCallback:this.hideAgeGenderIntervention,screenName:n.AGE_GENDER_RECOLLECTION,showDetails:this.props.data.episodeDetails||this.props.data.movieDetails||this.props.data.channelDetails||this.props.data.sharedDetails})):i.a.createElement(i.a.Fragment,null,i.a.createElement(E.h,{fromDetailsPage:!0})),i.a.createElement("div",null,!0===this.state.showAgeGateToast?i.a.createElement(f.a,{toastOptions:this.state.ageGateToastOptions,onClose:function(){return t.onToastHide()}}):null),i.a.createElement("div",null,this.state.nextepisodecheck?i.a.createElement(b.a,{PopupId:"NextVideoPopup",DisplayPopUp:this.state.nextepisodecheck,onClosePopup:function(){return t.OpenpopupNextVideo()},PopUpText:{POPUP_HEADER:"Content Invalid Unable to Play",POPUP_CONTENT:"",POPUP_SUB_CONTENT:"",POPUP_SUBMIT_BUTTON:"Go Back",POPUP_CANCEL_BUTTON:""},onSubmit:function(){return t.ClosepopupNextVideo()},HTMediaFailure:!0}):null),d.isMobileOnly||1!=this.googleoptimizeVariantID?null:i.a.createElement("div",{className:"assetMetatadata webView ".concat(this.isAdPresent?"playerMetadata":""),style:this.state.customAdHeight},this.props.renderTitle(),this.props.renderShortDescription(),this.props.renderTrays()),i.a.createElement(i.a.Fragment,null,this.state.isLogoutPopupVisible?i.a.createElement(k.a,{logoutPopHistory:this.props.history}):"")))}},{key:"closeContestualSignin",value:function(e){this.props.history.length>2?this.props.history.goBack():this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof localStorage&&localStorage.getItem("reco_logic")&&localStorage.removeItem("reco_logic"),this.props.getCurrentTime({currentPlayTime:null,layout:null}),window.addEventListener("popstate",this.onPopstate,!1),localStorage.removeItem("hidesharepopup"),window.destroyingPlayer();try{JSON.parse(sessionStorage.getItem("demoModeData"))&&JSON.parse(sessionStorage.getItem("demoModeData")).demo_mode&&window.xhook.enable()}catch(e){}document.removeEventListener("mousewheel",this.scrollDownShowHeader,!1),document.removeEventListener("mousewheel",this.scrollUpHideHeader,!1);try{var e;"undefined"==typeof window||null==this||null===(e=this.props)||void 0===e||!e.handleLess()||"null"===document.querySelector(".MovieDetail.revamp-Container")&&null===document.querySelector(".MovieDetail.revamp-Container")&&"undefined"===document.querySelector(".MovieDetail.revamp-Container")&&void 0===document.querySelector(".MovieDetail.revamp-Container")||this.props.handleLess()}catch(e){}}}])&&Z(t.prototype,a),o&&Z(t,o),l}(o.Component);t.a=Object(s.b)((function(e){return{sharedDetails:e.pageDetails.sharedDetails,dictionary:e.dictionary,episodePageData:e,country:e.country,analyticsDetails:e.analytics_details,eventDetails:e.eventDetails,bingeTrayInfo:e.bingeTrayInfo,userDetails:e.loggedInUserDetails,config:e.config,selectedProfile:e.selectedProfile,keyMomentDetails:e.pageDetails.keyMomentDetails,currentPlayTime:e.currentPlayTimeReducer,userState:e.userState,ResolutionLadder:e.ResolutionLadder,videoResolutionLadder:e.videoResolutionLadder,featureConfig:e.featureConfig,channelStores:e.country&&e.country.resultObj,profileInfo:e.loggedInUserDetails,serverflagDetails:e.serverflagDetails,configComplete:e.configComplete,SetAssetDeeplink:e.SetAssetDeeplink,showDetails:e.pageDetails.showDetails,reminderSetPlayer:e.reminderSetPlayer,myListSetPlayer:e.myListSetPlayer}}),(function(e){return{serverloadDetails:function(t){return e({type:l.wb,payload:t})},getCurrentTime:function(t){return e({type:"GET_PLAYTIME",payload:t})},crossPlatformUpgradeErrorPopup:function(t){return e(Object(l.dc)(t))},fetchEventDetails:function(t){return e(Object(l.sc)(t))},addSettingToStore:function(t){return e({type:FETCH_GETSETTINGS_RESOLUTION,payload:{data:{resultObj:{settings:Q({},t)}}}})},addSettingLadderToStore:function(t){return e({type:FETCH_GETSETTINGS_RESOLUTION_LADDER,payload:{data:{resultObj:{settings:Q({},t)}}}})},fetchOverlayPopup:function(t){return e({type:l.Hb,payload:t})},setAssetDeepLink:function(t){return e(Object(l.Zc)({assetDeepLink:t}))},fetchDetailsPageData:function(t,a,o,i){return e(Object(l.lc)(t,a,o,!1,i))},reminderSetPlayer:function(t){return e({type:l.mb,payload:t})},myListSetPlayer:function(t){return e({type:l.db,payload:t})}}}))(m()(w.a,u.a)(Object(S.i)(ne)))},1602:function(e,t){e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3e%3cg fill='none' fill-rule='evenodd'%3e%3crect width='40' height='40' fill='%23000' fill-opacity='.5' rx='20'/%3e%3cpath d='M26 14L14 26m0-12l12 12' stroke='%23FFF' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'/%3e%3c/g%3e%3c/svg%3e"}}]);